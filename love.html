<!DOCTYPE html>
<html>
<head>
    <title>ğŸ‹loveâœ¨</title>
    <meta name="Generator" content="EditPlus">
    <meta name="Author" content="">
    <meta name="Keywords" content="æ¨±èŠ±,çˆ±å¿ƒ,æ°›å›´,ä¸­å¿ƒæ–‡å­—">
    <meta name="Description" content="æ¨±èŠ±é£˜è½+çˆ±å¿ƒç²’å­åŠ¨ç”»+çˆ±å¿ƒä¸­é—´æ–‡å­—">
    <!-- å¼•å…¥jQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <style>
        /* 1. å…¨å±€åˆå§‹åŒ– */
        * {
            margin: 0;
            padding: 0;
        }
        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        .container {
            width: 100%;
            height: 100%;
            position: relative;
        }

        /* 2. èƒŒæ™¯å›¾ */
        body {
            /*background: url("image/bg9.jpg") no-repeat center center; /* æ›¿æ¢ä¸ºä½ çš„èƒŒæ™¯å›¾è·¯å¾„ */
            background-color: black;
            background-size: cover;
        }

        /* 3. ä¿æš–æç¤ºæ–‡å­— */
        .Flex-color-Special {
            text-shadow: 0 0 10px #f8faf9, 0 0 20px #edf0f0, 0 0 30px #e646ae, 0 0 40px #0aadee;
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            color: #c92a8c;
            font-size: 25px;
            z-index: 1;
        }
        @-webkit-keyframes fadeIn {
            0% { opacity: 0; }
            50% { opacity: 0.5; }
            100% { opacity: 0.7; }
        }
        .Flex-fadeIn {
            -webkit-animation-name: fadeIn;
            -webkit-animation-duration: 8s;
            -webkit-animation-iteration-count: infinite;
            -webkit-animation-delay: 0s;
        }

        /* 4. åŠ¨æ€æ•ˆæœå±‚çº§ + æ–°å¢ï¼šçˆ±å¿ƒä¸­é—´æ–‡å­—æ ·å¼ï¼ˆæ ¸å¿ƒï¼‰ */
        #jsi-cherry-container canvas { /* æ¨±èŠ±canvas */
            position: absolute;
            top: 0;
            left: 0;
            z-index: 0;
        }
        #pinkboard { /* çˆ±å¿ƒç²’å­canvas */
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 3; /* çˆ±å¿ƒç²’å­åœ¨æœ€ä¸Šå±‚ï¼Œè¦†ç›–æ–‡å­—è¾¹ç¼˜ï¼Œå¢å¼ºèåˆæ„Ÿ */
        }

        /* æ–°å¢1ï¼šçˆ±å¿ƒä¸­é—´æ–‡å­—å®¹å™¨ - ç²¾å‡†å±…ä¸­ï¼ˆä¸çˆ±å¿ƒä¸­å¿ƒå¯¹é½ï¼‰ */
        .heart-center-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%); /* æ°´å¹³+å‚ç›´å±…ä¸­ */
            z-index: 2.5; /* æ–‡å­—åœ¨æ¨±èŠ±ä¹‹ä¸Šã€çˆ±å¿ƒç²’å­ä¹‹ä¸‹ï¼Œä¸é®æŒ¡ç²’å­æ‰©æ•£ */
            text-align: center; /* æ–‡å­—å†…éƒ¨å±…ä¸­ */
            pointer-events: none; /* é¿å…æ–‡å­—é®æŒ¡ç²’å­äº¤äº’ï¼ˆå¯é€‰ï¼‰ */
        }
        /* æ–°å¢2ï¼šæ–‡å­—æ ·å¼ - è´´åˆç²‰è‰²æ°›å›´ï¼ŒåŠ å‘å…‰æ•ˆæœ */
        .heart-center-text span {
            display: block; /* æ¯è¡Œæ–‡å­—ç‹¬å ä¸€è¡Œ */
            color: hsl(330, 90%, 95%); /* æµ…ç²‰è‰²æ–‡å­—ï¼Œæ›´æ˜äº® */
            font-size: 32px; /* æ–‡å­—å¤§å°ï¼Œå¯è°ƒæ•´ */
            font-weight: bold;
            letter-spacing: 2px; /* å­—é—´è·ï¼Œå¢å¼ºç¾æ„Ÿ */
            /* ç²‰è‰²å‘å…‰é˜´å½±ï¼Œä¸çˆ±å¿ƒã€æ¨±èŠ±è‰²è°ƒç»Ÿä¸€ */
            text-shadow: 0 0 8px #ea80b0, 
                         0 0 16px #ea80b0, 
                         0 0 24px #e646ae;
            margin: 8px 0; /* å¤šè¡Œæ–‡å­—é—´è· */
        }

        /* 5. éŸ³é¢‘æ§ä»¶æ ·å¼ */
        audio {
            position: absolute;
            bottom: 10px;
            left: 10px;
            z-index: 4;
            opacity: 0.5;
        }

        /* æ–°å¢ï¼šå“åº”å¼è°ƒæ•´ï¼ˆå°å±å¹•ç¼©å°æ–‡å­—ï¼‰ */
        @media (max-width: 768px) {
            .heart-center-text span {
                font-size: 22px; /* å°å±å¹•æ–‡å­—ç¼©å° */
                letter-spacing: 1px;
            }
        }
    </style>
</head>
<body>
    <!-- 1. èƒŒæ™¯éŸ³ä¹ -->
    <audio autoplay loop preload="auto">
        <source src="music1/1.mp3"> <!-- æ›¿æ¢ä¸ºä½ çš„éŸ³ä¹è·¯å¾„ -->
    </audio>
    <audio autoplay loop preload="auto">
        <source src="renxi.mp3" type="audio/mp3"> <!-- æ›¿æ¢ä¸ºä½ çš„éŸ³ä¹è·¯å¾„ -->
    </audio>

    <!-- 2. ä¸»å®¹å™¨ï¼šåŒ…å«æ¨±èŠ±+çˆ±å¿ƒç²’å­+ä¿æš–æ–‡å­—+çˆ±å¿ƒä¸­é—´æ–‡å­— -->
    <div id="jsi-cherry-container" class="container">
        <!-- æ–°å¢ï¼šçˆ±å¿ƒä¸­é—´çš„æ–‡å­—ï¼ˆæ ¸å¿ƒæ–°å¢éƒ¨åˆ†ï¼‰ -->
        <div class="heart-center-text">
            <span>ğŸ‹loveâœ¨</span> <!-- ç¬¬ä¸€è¡Œæ–‡å­—ï¼Œå¯ä¿®æ”¹ -->
            
        </div>

        <!-- ä¿æš–æç¤ºæ–‡å­— -->
        <span class="Flex-color-Special Flex-fadeIn">å†¬å¤©ï¼Œè®°å¾—ä¿æš–å“Ÿ</span>

        <!-- çˆ±å¿ƒç²’å­canvas -->
        <canvas id="pinkboard"></canvas>
    </div>

    <!-- 3. æ¨±èŠ±åŠ¨ç”»è„šæœ¬ï¼ˆä¸å˜ï¼‰ -->
    <script>
        var RENDERER = {
            INIT_CHERRY_BLOSSOM_COUNT: 30,
            MAX_ADDING_INTERVAL: 5,
            
            init: function(){
                this.setParameters();
                this.reconstructMethods();
                this.createCherries();
                this.render();
            },
            setParameters: function(){
                this.$container = $('#jsi-cherry-container');
                this.width = this.$container.width();
                this.height = this.$container.height();
                this.context = $('<canvas />').attr({width: this.width, height: this.height}).appendTo(this.$container).get(0).getContext('2d');
                this.cherries = [];
                this.maxAddingInterval = Math.round(this.MAX_ADDING_INTERVAL * 1000 / this.width);
                this.addingInterval = this.maxAddingInterval;
            },
            reconstructMethods: function(){
                this.render = this.render.bind(this);
            },
            createCherries: function(){
                for(var i = 0, length = Math.round(this.INIT_CHERRY_BLOSSOM_COUNT * this.width / 1000); i < length; i++){
                    this.cherries.push(new CHERRY_BLOSSOM(this, true));
                }
            },
            render: function(){
                requestAnimationFrame(this.render);
                this.context.clearRect(0, 0, this.width, this.height);
                
                this.cherries.sort(function(cherry1, cherry2){
                    return cherry1.z - cherry2.z;
                });
                for(var i = this.cherries.length - 1; i >= 0; i--){
                    if(!this.cherries[i].render(this.context)){
                        this.cherries.splice(i, 1);
                    }
                }
                if(--this.addingInterval == 0){
                    this.addingInterval = this.maxAddingInterval;
                    this.cherries.push(new CHERRY_BLOSSOM(this, false));
                }
            }
        };
        var CHERRY_BLOSSOM = function(renderer, isRandom){
            this.renderer = renderer;
            this.init(isRandom);
        };
        CHERRY_BLOSSOM.prototype = {
            FOCUS_POSITION: 300,
            FAR_LIMIT: 800,
            MAX_RIPPLE_COUNT: 100,
            RIPPLE_RADIUS: 100,
            SURFACE_RATE: 0.5,
            SINK_OFFSET: 20,
            
            init: function(isRandom){
                this.x = this.getRandomValue(-this.renderer.width, this.renderer.width);
                this.y = isRandom ? this.getRandomValue(0, this.renderer.height) : this.renderer.height * 1.5;
                this.z = this.getRandomValue(0, this.FAR_LIMIT);
                this.vx = this.getRandomValue(-2, 2);
                this.vy = -5;
                this.theta = this.getRandomValue(0, Math.PI * 2);
                this.phi = this.getRandomValue(0, Math.PI * 2);
                this.psi = 0;
                this.dpsi = this.getRandomValue(Math.PI / 600, Math.PI / 300);
                this.opacity = 0;
                this.endTheta = false;
                this.endPhi = false;
                this.rippleCount = 0;
                
                var axis = this.getAxis(),
                    theta = this.theta + Math.ceil(-(this.y + this.renderer.height * this.SURFACE_RATE) / this.vy) * Math.PI / 500;
                theta %= Math.PI * 2;
                
                this.offsetY = 40 * ((theta <= Math.PI / 2 || theta >= Math.PI * 3 / 2) ? -1 : 1);
                this.thresholdY = this.renderer.height / 2 + this.renderer.height * this.SURFACE_RATE * axis.rate;
                this.entityColor = this.renderer.context.createRadialGradient(0, 40, 0, 0, 40, 80);
                this.entityColor.addColorStop(0, 'hsl(330, 70%, ' + 50 * (0.3 + axis.rate) + '%)');
                this.entityColor.addColorStop(0.05, 'hsl(330, 40%,' + 55 * (0.3 + axis.rate) + '%)');
                this.entityColor.addColorStop(1, 'hsl(330, 20%, ' + 70 * (0.3 + axis.rate) + '%)');
                this.shadowColor = this.renderer.context.createRadialGradient(0, 40, 0, 0, 40, 80);
                this.shadowColor.addColorStop(0, 'hsl(330, 40%, ' + 30 * (0.3 + axis.rate) + '%)');
                this.shadowColor.addColorStop(0.05, 'hsl(330, 40%,' + 30 * (0.3 + axis.rate) + '%)');
                this.shadowColor.addColorStop(1, 'hsl(330, 20%, ' + 40 * (0.3 + axis.rate) + '%)');
            },
            getRandomValue: function(min, max){
                return min + (max - min) * Math.random();
            },
            getAxis: function(){
                var rate = this.FOCUS_POSITION / (this.z + this.FOCUS_POSITION),
                    x = this.renderer.width / 2 + this.x * rate,
                    y = this.renderer.height / 2 - this.y * rate;
                return {rate: rate, x: x, y: y};
            },
            renderCherry: function(context, axis){
                context.beginPath();
                context.moveTo(0, 40);
                context.bezierCurveTo(-60, 20, -10, -60, 0, -20);
                context.bezierCurveTo(10, -60, 60, 20, 0, 40);
                context.fill();
                
                for(var i = -4; i < 4; i++){
                    context.beginPath();
                    context.moveTo(0, 40);
                    context.quadraticCurveTo(i * 12, 10, i * 4, -24 + Math.abs(i) * 2);
                    context.stroke();
                }
            },
            render: function(context){
                var axis = this.getAxis();
                
                if(axis.y == this.thresholdY && this.rippleCount < this.MAX_RIPPLE_COUNT){
                    context.save();
                    context.lineWidth = 2;
                    context.strokeStyle = 'hsla(0, 0%, 100%, ' + (this.MAX_RIPPLE_COUNT - this.rippleCount) / this.MAX_RIPPLE_COUNT + ')';
                    context.translate(axis.x + this.offsetY * axis.rate * (this.theta <= Math.PI ? -1 : 1), axis.y);
                    context.scale(1, 0.3);
                    context.beginPath();
                    context.arc(0, 0, this.rippleCount / this.MAX_RIPPLE_COUNT * this.RIPPLE_RADIUS * axis.rate, 0, Math.PI * 2, false);
                    context.stroke();
                    context.restore();
                    this.rippleCount++;
                }
                if(axis.y < this.thresholdY || (!this.endTheta || !this.endPhi)){
                    if(this.y <= 0){
                        this.opacity = Math.min(this.opacity + 0.01, 1);
                    }
                    context.save();
                    context.globalAlpha = this.opacity;
                    context.fillStyle = this.shadowColor;
                    context.strokeStyle = 'hsl(330, 30%,' + 40 * (0.3 + axis.rate) + '%)';
                    context.translate(axis.x, Math.max(axis.y, this.thresholdY + this.thresholdY - axis.y));
                    context.rotate(Math.PI - this.theta);
                    context.scale(axis.rate * -Math.sin(this.phi), axis.rate);
                    context.translate(0, this.offsetY);
                    this.renderCherry(context, axis);
                    context.restore();
                }
                context.save();
                context.fillStyle = this.entityColor;
                context.strokeStyle = 'hsl(330, 40%,' + 70 * (0.3 + axis.rate) + '%)';
                context.translate(axis.x, axis.y + Math.abs(this.SINK_OFFSET * Math.sin(this.psi) * axis.rate));
                context.rotate(this.theta);
                context.scale(axis.rate * Math.sin(this.phi), axis.rate);
                context.translate(0, this.offsetY);
                this.renderCherry(context, axis);
                context.restore();
                
                if(this.y <= -this.renderer.height / 4){
                    if(!this.endTheta){
                        for(var theta = Math.PI / 2, end = Math.PI * 3 / 2; theta <= end; theta += Math.PI){
                            if(this.theta < theta && this.theta + Math.PI / 200 > theta){
                                this.theta = theta;
                                this.endTheta = true;
                                break;
                            }
                        }
                    }
                    if(!this.endPhi){
                        for(var phi = Math.PI / 8, end = Math.PI * 7 / 8; phi <= end; phi += Math.PI * 3 / 4){
                            if(this.phi < phi && this.phi + Math.PI / 200 > phi){
                                this.phi = Math.PI / 8;
                                this.endPhi = true;
                                break;
                            }
                        }
                    }
                }
                if(!this.endTheta){
                    if(axis.y == this.thresholdY){
                        this.theta += Math.PI / 200 * ((this.theta < Math.PI / 2 || (this.theta >= Math.PI && this.theta < Math.PI * 3 / 2)) ? 1 : -1);
                    }else{
                        this.theta += Math.PI / 500;
                    }
                    this.theta %= Math.PI * 2;
                }
                if(this.endPhi){
                    if(this.rippleCount == this.MAX_RIPPLE_COUNT){
                        this.psi += this.dpsi;
                        this.psi %= Math.PI * 2;
                    }
                }else{
                    this.phi += Math.PI / ((axis.y == this.thresholdY) ? 200 : 500);
                    this.phi %= Math.PI;
                }
                if(this.y <= -this.renderer.height * this.SURFACE_RATE){
                    this.x += 2;
                    this.y = -this.renderer.height * this.SURFACE_RATE;
                }else{
                    this.x += this.vx;
                    this.y += this.vy;
                }
                return this.z > -this.FOCUS_POSITION && this.z < this.FAR_LIMIT && this.x < this.renderer.width * 1.5;
            }
        };
        $(function(){
            RENDERER.init();
        });
    </script>

    <!-- 4. çˆ±å¿ƒç²’å­åŠ¨ç”»è„šæœ¬ï¼ˆä¸å˜ï¼‰ -->
    <script>
        var settings = {
            particles: {
                length: 500,
                duration: 2,
                velocity: 100,
                effect: -0.75,
                size: 30,
            },
        };

        (function () {
            var b = 0;
            var c = ["ms", "moz", "webkit", "o"];
            for (var a = 0; a < c.length && !window.requestAnimationFrame; ++a) {
                window.requestAnimationFrame = window[c[a] + "RequestAnimationFrame"];
                window.cancelAnimationFrame =
                    window[c[a] + "CancelAnimationFrame"] ||
                    window[c[a] + "CancelRequestAnimationFrame"];
            }
            if (!window.requestAnimationFrame) {
                window.requestAnimationFrame = function (h, e) {
                    var d = new Date().getTime();
                    var f = Math.max(0, 16 - (d - b));
                    var g = window.setTimeout(function () {
                        h(d + f);
                    }, f);
                    b = d + f;
                    return g;
                };
            }
            if (!window.cancelAnimationFrame) {
                window.cancelAnimationFrame = function (d) {
                    clearTimeout(d);
                };
            }
        })();

        var Point = (function () {
            function Point(x, y) {
                this.x = typeof x !== "undefined" ? x : 0;
                this.y = typeof y !== "undefined" ? y : 0;
            }
            Point.prototype.clone = function () {
                return new Point(this.x, this.y);
            };
            Point.prototype.length = function (length) {
                if (typeof length == "undefined")
                    return Math.sqrt(this.x * this.x + this.y * this.y);
                this.normalize();
                this.x *= length;
                this.y *= length;
                return this;
            };
            Point.prototype.normalize = function () {
                var length = this.length();
                this.x /= length;
                this.y /= length;
                return this;
            };
            return Point;
        })();

        var Particle = (function () {
            function Particle() {
                this.position = new Point();
                this.velocity = new Point();
                this.acceleration = new Point();
                this.age = 0;
            }
            Particle.prototype.initialize = function (x, y, dx, dy) {
                this.position.x = x;
                this.position.y = y;
                this.velocity.x = dx;
                this.velocity.y = dy;
                this.acceleration.x = dx * settings.particles.effect;
                this.acceleration.y = dy * settings.particles.effect;
                this.age = 0;
            };
            Particle.prototype.update = function (deltaTime) {
                this.position.x += this.velocity.x * deltaTime;
                this.position.y += this.velocity.y * deltaTime;
                this.velocity.x += this.acceleration.x * deltaTime;
                this.velocity.y += this.acceleration.y * deltaTime;
                this.age += deltaTime;
            };
            Particle.prototype.draw = function (context, image) {
                function ease(t) {
                    return --t * t * t + 1;
                }
                var size = image.width * ease(this.age / settings.particles.duration);
                context.globalAlpha = 1 - this.age / settings.particles.duration;
                context.drawImage(
                    image,
                    this.position.x - size / 2,
                    this.position.y - size / 2,
                    size,
                    size
                );
            };
            return Particle;
        })();

        var ParticlePool = (function () {
            var particles,
                firstActive = 0,
                firstFree = 0,
                duration = settings.particles.duration;

            function ParticlePool(length) {
                particles = new Array(length);
                for (var i = 0; i < particles.length; i++)
                    particles[i] = new Particle();
            }
            ParticlePool.prototype.add = function (x, y, dx, dy) {
                particles[firstFree].initialize(x, y, dx, dy);
                firstFree++;
                if (firstFree == particles.length) firstFree = 0;
                if (firstActive == firstFree) firstActive++;
                if (firstActive == particles.length) firstActive = 0;
            };
            ParticlePool.prototype.update = function (deltaTime) {
                var i;
                if (firstActive < firstFree) {
                    for (i = firstActive; i < firstFree; i++)
                        particles[i].update(deltaTime);
                }
                if (firstFree < firstActive) {
                    for (i = firstActive; i < particles.length; i++)
                        particles[i].update(deltaTime);
                    for (i = 0; i < firstFree; i++) particles[i].update(deltaTime);
                }
                while (
                    particles[firstActive].age >= duration &&
                    firstActive != firstFree
                ) {
                    firstActive++;
                    if (firstActive == particles.length) firstActive = 0;
                }
            };
            ParticlePool.prototype.draw = function (context, image) {
                var i;
                if (firstActive < firstFree) {
                    for (i = firstActive; i < firstFree; i++)
                        particles[i].draw(context, image);
                }
                if (firstFree < firstActive) {
                    for (i = firstActive; i < particles.length; i++)
                        particles[i].draw(context, image);
                    for (i = 0; i < firstFree; i++) particles[i].draw(context, image);
                }
            };
            return ParticlePool;
        })();

        (function (canvas) {
            var context = canvas.getContext("2d"),
                particles = new ParticlePool(settings.particles.length),
                particleRate =
                    settings.particles.length / settings.particles.duration,
                time;

            function pointOnHeart(t) {
                return new Point(
                    160 * Math.pow(Math.sin(t), 3),
                    130 * Math.cos(t) -
                        50 * Math.cos(2 * t) -
                        20 * Math.cos(3 * t) -
                        10 * Math.cos(4 * t) +
                        25
                );
            }

            var image = (function () {
                var canvas = document.createElement("canvas"),
                    context = canvas.getContext("2d");
                canvas.width = settings.particles.size;
                canvas.height = settings.particles.size;
                function to(t) {
                    var point = pointOnHeart(t);
                    point.x =
                        settings.particles.size / 2 +
                        (point.x * settings.particles.size) / 350;
                    point.y =
                        settings.particles.size / 2 -
                        (point.y * settings.particles.size) / 350;
                    return point;
                }
                context.beginPath();
                var t = -Math.PI;
                var point = to(t);
                context.moveTo(point.x, point.y);
                while (t < Math.PI) {
                    t += 0.01;
                    point = to(t);
                    context.lineTo(point.x, point.y);
                }
                context.closePath();
                context.fillStyle = "#ea80b0";
                context.fill();
                var image = new Image();
                image.src = canvas.toDataURL();
                return image;
            })();

            function render() {
                requestAnimationFrame(render);
                var newTime = new Date().getTime() / 1000,
                    deltaTime = newTime - (time || newTime);
                time = newTime;
                context.clearRect(0, 0, canvas.width, canvas.height);
                var amount = particleRate * deltaTime;
                for (var i = 0; i < amount; i++) {
                    var pos = pointOnHeart(Math.PI - 2 * Math.PI * Math.random());
                    var dir = pos.clone().length(settings.particles.velocity);
                    particles.add(
                        canvas.width / 2 + pos.x,
                        canvas.height / 2 - pos.y,
                        dir.x,
                        -dir.y
                    );
                }
                particles.update(deltaTime);
                particles.draw(context, image);
            }

            function onResize() {
                canvas.width = canvas.clientWidth;
                canvas.height = canvas.clientHeight;
            }
            window.onresize = onResize;

            setTimeout(function () {
                onResize();
                render();
            }, 10);
        })(document.getElementById("pinkboard"));
    </script>
</body>
</html>